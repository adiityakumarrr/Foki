<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FOKI</title>

<style>
body{
    margin:0;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
    background:linear-gradient(135deg,#e0eafc,#cfdef3);
    color:#1d1d1f;
}

/* LOGIN */
#loginBox{
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    height:100vh;
}

#loginBox h1{
    font-size:52px;
    letter-spacing:4px;
    margin-bottom:20px;
}

input{
    padding:12px;
    margin:8px;
    border-radius:12px;
    border:1px solid #ccc;
    width:260px;
    font-size:16px;
}

button{
    padding:10px 20px;
    border-radius:12px;
    border:none;
    cursor:pointer;
    font-weight:600;
    font-size:15px;
    background:linear-gradient(135deg,#667eea,#764ba2);
    color:white;
}

/* MAIN */
.container{
    display:none;
    height:100vh;
    padding:20px;
    box-sizing:border-box;
}

.dashboard{
    display:flex;
    height:92%;
    gap:20px;
}

/* CARDS */
.card{
    background:white;
    border-radius:22px;
    padding:30px;
    box-shadow:0 12px 30px rgba(0,0,0,0.12);
    overflow:auto;
}

/* LEFT */
.left{ width:25%; }

/* CENTER */
.center{ width:45%; text-align:center; }

/* RIGHT */
.right{ width:30%; text-align:center; }

/* SUBJECT */
.subject{
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:20px;
    margin:15px 0;
    background:#f4f6fb;
    border-radius:18px;
    font-size:20px;
}

.play-btn{
    padding:8px 16px;
    border-radius:10px;
    border:none;
    background:#d1f2eb;
    font-weight:600;
    font-size:16px;
}

.play-btn.active{
    background:#ff6b81;
    color:white;
}

/* TOTAL */
#totalTime{
    font-size:48px;
    margin-top:40px;
    font-weight:700;
}

/* FOOTER */
.footer{
    text-align:center;
    margin-top:10px;
    font-size:16px;
    font-weight:500;
}
</style>
</head>

<body>

<div id="loginBox">
    <h1>FOKI</h1>
    <input type="text" id="username" placeholder="Enter Username">
    <button onclick="login()">Enter</button>
</div>

<div class="container" id="app">

    <div class="dashboard">

        <!-- LEFT -->
        <div class="card left">
            <h2>üèÜ Leaderboard (Today)</h2>
            <div id="leaderboardList" style="font-size:18px;"></div>
        </div>

        <!-- CENTER -->
        <div class="card center">
            <h2>üìö Study Subjects</h2>
            <div id="subjects"></div>
            <input type="text" id="newSubject" placeholder="Add Subject">
            <button onclick="addSubject()">Add</button>
        </div>

        <!-- RIGHT -->
        <div class="card right">
            <h2>Total Studied Today</h2>
            <div id="totalTime">00:00:00</div>
        </div>

    </div>

    <div class="footer">
        Made with ‚ù§Ô∏è by Aditya
    </div>

</div>

<script>
let currentUser=null;
let timer=null;
let activeSubject=null;
let userData=null;

/* LOGIN */
function login(){
    const name=document.getElementById("username").value.trim();
    if(!name) return;

    currentUser=name;
    document.getElementById("loginBox").style.display="none";
    document.getElementById("app").style.display="block";

    loadData();
    renderSubjects();
    updateUI();
    updateLeaderboard();
}

/* LOAD DATA */
function loadData(){
    const today=new Date().toLocaleDateString();
    const saved=localStorage.getItem(currentUser);

    if(saved){
        userData=JSON.parse(saved);

        /* RESET IF NEW DAY */
        if(userData.date !== today){
            for(let s in userData.subjects){
                userData.subjects[s].total=0;
            }
            userData.date=today;
            saveData();
        }

    }else{
        userData={
            date:today,
            subjects:{
                Physics:{total:0},
                Chemistry:{total:0},
                Math:{total:0}
            }
        };
        saveData();
    }
}

/* SAVE */
function saveData(){
    localStorage.setItem(currentUser,JSON.stringify(userData));
}

/* RENDER SUBJECTS */
function renderSubjects(){
    const container=document.getElementById("subjects");
    container.innerHTML="";
    for(let sub in userData.subjects){
        let div=document.createElement("div");
        div.className="subject";
        div.innerHTML=`
            <span>${sub} - <span id="${sub}Time">${formatTime(userData.subjects[sub].total)}</span></span>
            <button class="play-btn" id="${sub}Btn" onclick="toggleTimer('${sub}')">‚ñ∂</button>
        `;
        container.appendChild(div);
    }
}

/* TIMER */
function toggleTimer(sub){
    const btn=document.getElementById(sub+"Btn");

    if(activeSubject===sub){
        clearInterval(timer);
        btn.classList.remove("active");
        btn.innerText="‚ñ∂";
        activeSubject=null;
        saveData();
        updateLeaderboard();
        return;
    }

    if(activeSubject){
        document.getElementById(activeSubject+"Btn").classList.remove("active");
        document.getElementById(activeSubject+"Btn").innerText="‚ñ∂";
    }

    clearInterval(timer);
    activeSubject=sub;
    btn.classList.add("active");
    btn.innerText="‚è∏";

    timer=setInterval(()=>{
        userData.subjects[sub].total++;
        updateUI();
    },1000);
}

/* UPDATE UI */
function updateUI(){
    let total=0;
    for(let s in userData.subjects){
        total+=userData.subjects[s].total;
        document.getElementById(s+"Time").innerText=
            formatTime(userData.subjects[s].total);
    }

    document.getElementById("totalTime").innerText=formatTime(total);
}

/* ADD SUBJECT */
function addSubject(){
    const name=document.getElementById("newSubject").value.trim();
    if(name && !userData.subjects[name]){
        userData.subjects[name]={total:0};
        saveData();
        renderSubjects();
        document.getElementById("newSubject").value="";
    }
}

/* LEADERBOARD (DAILY RESET AUTO) */
function updateLeaderboard(){
    const today=new Date().toLocaleDateString();
    let board=[];

    for(let key in localStorage){
        try{
            let data=JSON.parse(localStorage.getItem(key));
            if(data && data.date===today){
                let total=Object.values(data.subjects)
                    .reduce((a,b)=>a+b.total,0);
                board.push({name:key,total});
            }
        }catch(e){}
    }

    board.sort((a,b)=>b.total-a.total);

    let html="";
    board.slice(0,5).forEach((u,i)=>{
        html+=`<p>${i+1}. ${u.name} - ${formatTime(u.total)}</p>`;
    });

    document.getElementById("leaderboardList").innerHTML=html;
}

/* FORMAT TIME */
function formatTime(sec){
    let h=String(Math.floor(sec/3600)).padStart(2,'0');
    let m=String(Math.floor((sec%3600)/60)).padStart(2,'0');
    let s=String(sec%60).padStart(2,'0');
    return `${h}:${m}:${s}`;
}
</script>

</body>
</html>